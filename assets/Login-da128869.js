import{_ as g,r as h,o as l,c as n,a as V,w,b,d as k,e as y,f as r,g as p,h as m,v as f,i,n as S,F as T,p as x,j as N}from"./index-0d61ff92.js";const U={name:"Title"},I={class:"title-container"};function j(s,e,_,v,a,t){const u=h("router-link");return l(),n("header",I,[V(u,{class:"title",to:"/"},{default:w(()=>[b("雜物商城")]),_:1})])}const F=g(U,[["render",j],["__scopeId","data-v-e394d806"]]),c=k.create({baseURL:"https://api.escuelajs.co/api/v1/auth",timeout:1e3});c.interceptors.request.use(s=>{const e=localStorage.getItem("token");return e&&(s.headers.Authorization=`${e}`),s},s=>Promise.reject(s));c.interceptors.response.use(s=>{const{data:e}=s;return e},s=>{const{status:e}=s;return e===401?y.push({name:"Login"}):Promise.reject(s)});function M(s){return c({method:"POST",url:"/login",data:s})}const B={name:"Login",data(){return{user:{email:"",password:""},isNullValue:!1,errorMessage:!1}},components:{Title:F},computed:{canSubmit(){const{email:s,password:e}=this.user;return Boolean(s&&e)}},methods:{focusValue(s){const e=Boolean(this.user.email!==""&&this.user.password!=="");switch(s.target.className){case"account":e?this.isNullValue=!1:this.isNullValue=!0;break}},loginUser(){M(this.user).then(s=>{const{access_token:e}=s;localStorage.setItem("token",e),this.$router.push("/Home")}).catch(s=>(this.errorMessage=!0,setTimeout(()=>this.errorMessage=!1,3e3),Promise.reject(s)))}}},d=s=>(x("data-v-7d6e9885"),s=s(),N(),s),C={class:"login-container"},L=d(()=>r("h2",{class:"login-title"},"登入",-1)),P={class:"group"},q=d(()=>r("label",{for:"account"},"帳號:",-1)),z={key:0,style:{color:"#f00"},class:"account-error"},H={class:"group"},O=d(()=>r("label",{for:"password"},"密碼:",-1)),A={key:0,style:{color:"#f00"},class:"password-error"},D={class:"login-wrap"},E=["disabled"],R={key:0,style:{color:"#fff"}};function G(s,e,_,v,a,t){const u=h("Title");return l(),n(T,null,[V(u),r("div",C,[r("form",{class:"form",method:"POST",onSubmit:e[8]||(e[8]=p((...o)=>t.loginUser&&t.loginUser(...o),["prevent"]))},[L,r("div",P,[q,m(r("input",{type:"email",class:"account",id:"account",placeholder:"帳號:john@mail.com","onUpdate:modelValue":e[0]||(e[0]=o=>a.user.email=o),onFocusin:e[1]||(e[1]=(...o)=>t.focusValue&&t.focusValue(...o)),onFocusout:e[2]||(e[2]=(...o)=>t.focusValue&&t.focusValue(...o))},null,544),[[f,a.user.email]]),a.isNullValue?(l(),n("span",z,"帳號必填")):i("",!0)]),r("div",H,[O,m(r("input",{type:"password",class:"password",id:"password",placeholder:"密碼:changeme","onUpdate:modelValue":e[3]||(e[3]=o=>a.user.password=o),onFocusin:e[4]||(e[4]=(...o)=>t.focusValue&&t.focusValue(...o)),onFocusout:e[5]||(e[5]=(...o)=>t.focusValue&&t.focusValue(...o))},null,544),[[f,a.user.password]]),a.isNullValue?(l(),n("span",A,"密碼必填")):i("",!0)]),r("div",D,[r("button",{type:"submit",class:S(["login-button",{success:t.canSubmit}]),onClick:e[6]||(e[6]=(...o)=>t.loginUser&&t.loginUser(...o)),onTouchstart:e[7]||(e[7]=p((...o)=>t.loginUser&&t.loginUser(...o),["stop"])),disabled:!t.canSubmit}," 登入 ",42,E)]),a.errorMessage?(l(),n("span",R,"帳號或密碼錯誤")):i("",!0)],32)])],64)}const K=g(B,[["render",G],["__scopeId","data-v-7d6e9885"]]);export{K as default};
